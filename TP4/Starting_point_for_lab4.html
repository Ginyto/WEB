<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Point de départ pour TP4</title>
    <link rel="stylesheet" href="/TP4/style.css">

</head>

<body>
  <header>
    <div id="logo"></div>
    <form name="newUser" action="" class="box" id="new-user" onsubmit="return false">
      <div class="container">
        <input type="text" name="firstname" placeholder="Prénom" required="">
        <input type="text" name="lastname" placeholder="Nom" required="">
        <input type="email" name="email" placeholder="E-Mail" required="">
        <select name="role" required="">
          <option value="Enseignant">Enseignant</option>
          <option value="Étudiant">Étudiant</option>
        </select>
      </div>
      <div class="container left">
        <button id="submit" type="submit" class="btn" onclick="addElem()">Ajouter</button>
        <button type="button" class="btn" onclick="removeAll()">Tout supprimer</button>
      </div>
    </form>
  </header>


  <main>
    <div class="box">
      <table class="datatable">
        <thead>
          <tr>
            <th>Prénom</th>
            <th>Nom</th>
            <th>Email</th>
            <th>Rôle</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </main>

  <script charset="utf-8">
     
       var newUserForm = document.forms.newUser; 
         
       function addElem () {
       
        if (
          !document.newUser.firstname.checkValidity() ||
          !document.newUser.lastname.checkValidity() ||
          !document.newUser.email.checkValidity()
        ) {
          return;
        }

          console.log(newUserForm.elements.firstname.value)
         
          const newItem = document.createElement('tr')
          const firstnameTd = document.createElement('td')
          const lastnameTd = document.createElement('td')
          const emailTd = document.createElement('td')
          const roleTd = document.createElement('td')
          firstnameTd.textContent = document.newUser.firstname.value
          lastnameTd.textContent = document.newUser.lastname.value
          emailTd.textContent = document.newUser.email.value
          roleTd.textContent = document.newUser.role.value

         
          newItem.append(firstnameTd, lastnameTd, emailTd, roleTd)
          /* le premier élément dans le document qui contient la classe "datatable" est retourné*/
          const table = document.querySelector('.datatable tbody')
         
          table.appendChild(newItem)
          
       }


         
         function removeAll () {
        const tbody = document.querySelector('.datatable tbody')
        while (tbody.firstChild) {
          tbody.removeChild(tbody.firstChild)
        }
      }

       
</script>


</body>
</html>